#!/usr/bin/env python
"Pump one drop of water"

import argparse 
from pathlib import Path
import RPi.GPIO as GPIO
from experiment.helpers import read_config
GPIO.setmode(GPIO.BCM)
GPIO.setwarnings(False)

parser = argparse.ArgumentParser(__doc__)
parser.add_argument("-c", "--config-path",
        help="Config path",
        dest="config_path", default="configs.toml", type=lambda x: Path(x).expanduser().absolute())
parser.add_argument("-off",
        help="Set led off",
        dest="off", action="store_false")
        
args = parser.parse_args()
config_path = args.config_path
off = args.off

configs = read_config(config_path)
cue_pin = int(configs["experiment"]["pins"]["cue"])

GPIO.setup(cue_pin, GPIO.OUT)
GPIO.output(cue_pin, off)
